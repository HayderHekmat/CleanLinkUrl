<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CleanLink – Privacy Tool</title>
  <meta name="description" content="Remove tracking parameters like utm_*, fbclid, gclid, and more. Get a clean, privacy-friendly link instantly.">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#193ce6",
            "background-dark": "#111421"
          },
          fontFamily: { display: ["Inter", "sans-serif"] },
          keyframes: { pop: { '0%,100%': {transform:'scale(1)'}, '50%':{transform:'scale(1.15)'} } },
          animation: { pop:'pop 0.4s ease-in-out' }
        }
      }
    }
  </script>

  <!-- QRCode.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
  <style>
    .focus-soft:focus { outline:none; box-shadow:0 0 0 4px rgba(59,130,246,.25); }
    #qrcode canvas { border-radius:0.75rem; width:100%; height:auto; }
    #proModal { backdrop-filter: blur(5px); }
  </style>
</head>

<body class="bg-background-dark text-slate-100 font-display">
  <!-- Header -->
  <header class="w-full border-b border-slate-800">
    <nav class="container mx-auto px-6 flex items-center justify-between py-6">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-indigo-600 text-white grid place-items-center font-extrabold text-xl shadow-lg">CL</div>
        <span class="text-2xl font-bold">CleanLink</span>
      </div>
      <div class="hidden md:flex items-center gap-6 text-slate-300 text-sm">
        <a href="#how" class="hover:text-white">Features</a>
        <a href="#pricing" class="hover:text-white">Pricing</a>
        <a href="#privacy" class="hover:text-white">Privacy</a>
      </div>
      <button id="goProTop" class="bg-primary text-white font-bold py-2 px-5 rounded-lg hover:opacity-90">Get Pro</button>
    </nav>
  </header>

  <!-- Hero + Cleaner -->
  <main class="flex-grow">
    <section class="py-20 text-center px-6 relative overflow-hidden">
      <div class="absolute -top-32 -left-32 w-64 h-64 bg-primary/20 rounded-full blur-3xl"></div>
      <div class="absolute -bottom-32 -right-32 w-64 h-64 bg-primary/30 rounded-full blur-3xl"></div>

      <!-- Scramble Headline -->
      <h1 id="scrambleText" class="text-4xl sm:text-5xl lg:text-6xl font-black text-white leading-tight tracking-tight">
        Clean and simplify your URLs — instantly
      </h1>

      <p class="mt-6 max-w-2xl mx-auto text-slate-400 text-lg">
        Remove tracking parameters, share cleaner links, and stay in control of your data — all client-side, with zero tracking.
      </p>

      <!-- Input -->
      <div class="mt-12 max-w-3xl mx-auto bg-slate-900/40 border border-slate-800 rounded-2xl p-6 shadow-lg">
        <div class="relative">
          <span class="material-symbols-outlined absolute left-5 top-1/2 -translate-y-1/2 text-slate-500">link</span>
          <input id="urlInput" type="url"
            placeholder="Paste your URL here..."
            class="w-full bg-slate-900/70 border border-slate-700 rounded-xl py-4 pl-14 pr-36 text-white placeholder:text-slate-500 focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all text-lg" />
          <button id="cleanBtn" class="absolute right-4 top-1/2 -translate-y-1/2 bg-gradient-to-r from-primary to-indigo-500 text-white font-semibold px-5 py-2 rounded-lg hover:opacity-90 flex items-center gap-1">
            <span>Clean</span>
            <span class="material-symbols-outlined text-sm">arrow_forward</span>
          </button>
        </div>

        <div class="mt-4 flex items-center justify-between">
          <label class="flex items-center gap-2 text-slate-400 text-sm cursor-pointer">
            <input id="removeAll" type="checkbox" class="rounded border-slate-600">
            <span>Remove all parameters</span>
          </label>
          <input id="preserveInput" placeholder="Preserve: ref,aff_id"
                 class="bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-400 w-56 focus:ring-2 focus:ring-primary/30" />
        </div>

        <!-- Usage Counter -->
        <p id="usageCounter" class="mt-3 text-xs text-slate-500 text-center">0/10 cleans today (Free Plan)</p>
      </div>

      <!-- Result -->
      <div id="resultWrap" class="hidden mt-10 max-w-3xl mx-auto bg-slate-900/50 border border-slate-800 rounded-2xl p-6">
        <p class="text-slate-400 text-sm mb-2">Clean URL</p>
        <div id="resultUrl" class="bg-slate-800/60 border border-slate-700 rounded-lg p-3 font-mono text-slate-100 break-all"></div>
        <div class="flex gap-3 mt-4">
          <button id="copyBtn" class="bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-lg px-3 py-2 text-sm">Copy</button>
          <button id="openBtn" class="bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-lg px-3 py-2 text-sm">Open</button>
          <button id="shareBtn" class="bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-lg px-3 py-2 text-sm">Share</button>
        </div>

        <div id="qrWrap" class="hidden mt-6 flex flex-col items-center">
          <div class="text-sm text-slate-400 mb-2">QR Code</div>
          <div id="qrcode" class="bg-white p-3 rounded-xl"></div>
          <button id="downloadQRBtn" class="mt-3 bg-white/10 text-white px-4 py-2 rounded-lg hover:bg-white/20 text-sm">Download PNG</button>
        </div>
      </div>
      <p id="error" class="hidden mt-4 text-sm text-red-400"></p>
    </section>

    <!-- Features -->
    <section id="how" class="py-20 bg-slate-900/50 border-t border-slate-800">
      <div class="container mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold text-white mb-8">Why CleanLink?</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="bg-slate-800/60 p-6 rounded-xl border border-slate-700">
            <span class="material-symbols-outlined text-primary text-4xl mb-3">privacy_tip</span>
            <h3 class="text-lg font-semibold mb-2">Privacy First</h3>
            <p class="text-slate-400 text-sm">Everything happens in your browser. We never store or track your links.</p>
          </div>
          <div class="bg-slate-800/60 p-6 rounded-xl border border-slate-700">
            <span class="material-symbols-outlined text-primary text-4xl mb-3">cleaning_services</span>
            <h3 class="text-lg font-semibold mb-2">Smart Cleaning</h3>
            <p class="text-slate-400 text-sm">Removes known trackers while preserving key parameters.</p>
          </div>
          <div class="bg-slate-800/60 p-6 rounded-xl border border-slate-700">
            <span class="material-symbols-outlined text-primary text-4xl mb-3">share</span>
            <h3 class="text-lg font-semibold mb-2">Easy Sharing</h3>
            <p class="text-slate-400 text-sm">Generate QR codes and share clean links instantly.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing -->
    <section id="pricing" class="py-24 border-t border-slate-800 bg-slate-900/40 text-center">
      <h2 class="text-3xl font-bold mb-4 text-white">Upgrade to CleanLink Pro</h2>
      <p class="text-slate-400 max-w-2xl mx-auto mb-12">
        Unlock analytics, short links, and unlimited cleaning. Stay private, professional, and in control.
      </p>
      <div class="flex flex-col md:flex-row items-center justify-center gap-8">
        <div class="bg-slate-800/60 border border-slate-700 rounded-xl p-8 w-72">
          <h3 class="text-xl font-bold text-white mb-2">Free</h3>
          <p class="text-slate-400 text-sm mb-4">10 cleans/day • Basic cleaning • QR generator</p>
          <p class="text-4xl font-bold mb-4">€0</p>
          <button class="w-full py-3 rounded-lg bg-slate-700 text-white hover:bg-slate-600 transition">Use Free</button>
        </div>
        <div class="bg-gradient-to-br from-primary to-indigo-600 text-white rounded-xl p-8 w-72 shadow-lg">
          <h3 class="text-xl font-bold mb-2">Pro</h3>
          <p class="opacity-90 text-sm mb-4">Unlimited cleans • Custom domains • Analytics</p>
          <p class="text-4xl font-bold mb-4">€8<span class="text-lg font-medium">/mo</span></p>
          <button id="goProCta" class="w-full py-3 rounded-lg bg-white/10 hover:bg-white/20 border border-white/20 transition">Get Pro</button>
        </div>
      </div>
    </section>

    <!-- Privacy -->
    <section id="privacy" class="py-20 bg-slate-900 border-t border-slate-800 text-center">
      <div class="max-w-3xl mx-auto px-6">
        <h2 class="text-3xl font-bold text-white mb-6">Your Privacy Matters</h2>
        <p class="text-slate-400 text-sm leading-relaxed mb-8">
          CleanLink runs 100% locally in your browser — no servers, no logs, no cookies.  
          When you use Pro features, you’ll always give explicit consent.
        </p>
        <a href="mailto:hello@yourdomain.com"
           class="inline-block px-6 py-3 rounded-lg bg-gradient-to-r from-primary to-indigo-500 text-white font-semibold hover:opacity-90">
           Contact Us
        </a>
      </div>
    </section>
  </main>

  <footer class="w-full border-t border-slate-800 py-6 text-center text-slate-500 text-xs">
    © <span id="year"></span> CleanLink. Built for privacy-first sharing.
  </footer>

  <!-- ========== Modal for Pro Upgrade ========== -->
  <div id="proModal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50">
    <div class="bg-slate-900 border border-slate-700 rounded-xl p-8 max-w-sm text-center">
      <h3 class="text-xl font-bold text-white mb-3">Free Limit Reached</h3>
      <p class="text-slate-400 text-sm mb-6">You've used your 10 free cleans today. Upgrade to <strong>Pro</strong> for unlimited cleaning and analytics.</p>
      <button id="modalUpgrade" class="bg-gradient-to-r from-primary to-indigo-500 text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90">Go Pro (€8/mo)</button>
      <button id="modalClose" class="block mx-auto mt-4 text-slate-400 text-xs hover:text-slate-200">Continue Free</button>
    </div>
  </div>

  <!-- JS -->
  <script>
    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Scramble Effect
    class TextScramble {
      constructor(el) { this.el = el; this.chars = '!<>-_\\/[]{}—=+*^?#________'; this.update = this.update.bind(this); }
      setText(newText) { const oldText = this.el.innerText; const length = Math.max(oldText.length,newText.length); const promise=new Promise(resolve=>this.resolve=resolve); this.queue=[]; for(let i=0;i<length;i++){const from=oldText[i]||'',to=newText[i]||'',start=Math.floor(Math.random()*40),end=start+Math.floor(Math.random()*40); this.queue.push({from,to,start,end});} cancelAnimationFrame(this.frameRequest); this.frame=0; this.update(); return promise; }
      update(){let output='',complete=0; for(let i=0,n=this.queue.length;i<n;i++){let {from,to,start,end,char}=this.queue[i]; if(this.frame>=end){complete++; output+=to;} else if(this.frame>=start){if(!char||Math.random()<0.28) char=this.randomChar(),this.queue[i].char=char; output+=`<span class='text-indigo-400'>${char}</span>`;} else output+=from;} this.el.innerHTML=output; if(complete===this.queue.length)this.resolve(); else{this.frameRequest=requestAnimationFrame(this.update); this.frame++;}}
      randomChar(){return this.chars[Math.floor(Math.random()*this.chars.length)];}
    }
    document.addEventListener('DOMContentLoaded',()=>{const el=document.getElementById('scrambleText');const fx=new TextScramble(el);const phrases=['Clean and simplify your URLs — instantly','Remove all tracking and junk','Share privacy-friendly links'];let counter=0;const next=()=>{fx.setText(phrases[counter]).then(()=>setTimeout(next,2500));counter=(counter+1)%phrases.length;};next();});
  </script>

  <!-- Core Logic -->
  <script>
    const MAX_FREE_CLEANS=10,usageKey="cleanlink_usage",dateKey="cleanlink_date";
    const urlInput=document.getElementById('urlInput'),preserveInput=document.getElementById('preserveInput'),cleanBtn=document.getElementById('cleanBtn'),resultWrap=document.getElementById('resultWrap'),resultUrl=document.getElementById('resultUrl'),errorEl=document.getElementById('error'),copyBtn=document.getElementById('copyBtn'),openBtn=document.getElementById('openBtn'),shareBtn=document.getElementById('shareBtn'),qrWrap=document.getElementById('qrWrap'),qrcodeEl=document.getElementById('qrcode'),downloadQRBtn=document.getElementById('downloadQRBtn'),usageCounter=document.getElementById('usageCounter');
    const modal=document.getElementById('proModal'),modalClose=document.getElementById('modalClose'),modalUpgrade=document.getElementById('modalUpgrade');

    const BLOCKLIST=new Set(['utm_source','utm_medium','utm_campaign','utm_term','utm_content','gclid','fbclid','msclkid','yclid','dclid','gbraid','wbraid','mc_cid','mc_eid','igshid','ref_src','ref_url','ref','vero_id']);

    function normalizeUrl(r){try{return new URL(r)}catch{return new URL('https://'+r)}}
    function cleanURL(r,pList=[]){const pSet=new Set(pList.map(s=>s.trim().toLowerCase()).filter(Boolean));const rmAll=document.getElementById('removeAll').checked;const u=normalizeUrl(r);const params=u.searchParams;const del=[];params.forEach((_,k)=>{const l=k.toLowerCase();if((rmAll||BLOCKLIST.has(l)||l.startsWith('utm_'))&&!pSet.has(l))del.push(k)});del.forEach(k=>params.delete(k));if([...params.keys()].length===0)u.search='';if(u.hash&&/utm_|fbclid|gclid/i.test(u.hash))u.hash='';return u.toString();}
    function showError(m){errorEl.textContent=m;errorEl.classList.remove('hidden');resultWrap.classList.add('hidden');qrWrap.classList.add('hidden')}
   
    function hideError(){errorEl.classList.add('hidden')}
    function renderQR(t){qrcodeEl.innerHTML='';new QRCode(qrcodeEl,{text:t,width:180,height:180,correctLevel:QRCode.CorrectLevel.M})}
    function checkLimit(){const today=new Date().toDateString();const storedDate=localStorage.getItem(dateKey);let usage=parseInt(localStorage.getItem(usageKey)||"0",10);if(storedDate!==today){usage=0;localStorage.setItem(dateKey,today);localStorage.setItem(usageKey,"0");}if(usage>=MAX_FREE_CLEANS){modal.classList.remove("hidden");return false;}usage++;localStorage.setItem(usageKey,usage.toString());updateUsageDisplay(usage);return true;}
    function updateUsageDisplay(count){usageCounter.textContent=`${count}/${MAX_FREE_CLEANS} cleans today (Free Plan)`;}

    cleanBtn.addEventListener('click',()=>{if(!checkLimit())return;hideError();const r=urlInput.value.trim();if(!r)return showError('Please paste a URL first.');let p=[];if(preserveInput.value.trim())p=preserveInput.value.split(',').map(s=>s.trim().toLowerCase());try{const c=cleanURL(r,p);resultUrl.textContent=c;resultWrap.classList.remove('hidden');qrWrap.classList.remove('hidden');renderQR(c);}catch{showError('Invalid URL.');}});

    copyBtn.addEventListener('click',async()=>{await navigator.clipboard.writeText(resultUrl.textContent);copyBtn.textContent='Copied!';setTimeout(()=>copyBtn.textContent='Copy',1000)});
    openBtn.addEventListener('click',()=>window.open(resultUrl.textContent,'_blank'));
    shareBtn.addEventListener('click',async()=>{const t=resultUrl.textContent;if(navigator.share)await navigator.share({title:'Clean Link',url:t});else await navigator.clipboard.writeText(t)});
    downloadQRBtn.addEventListener('click',()=>{const c=qrcodeEl.querySelector('canvas');if(!c)return alert('QR not generated yet.');const l=document.createElement('a');l.download='cleanlink-qr.png';l.href=c.toDataURL('image/png');l.click()});
    modalClose.addEventListener('click',()=>modal.classList.add('hidden'));
    modalUpgrade.addEventListener('click',()=>window.location.href='https://buy.stripe.com/test_xxxxx'); // TODO: Replace with real Stripe link
  </script> 
</body> 
</html>
